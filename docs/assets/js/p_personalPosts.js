!function(e){function r(r){for(var o,s,i=r[0],c=r[1],u=r[2],p=0,f=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(l&&l(r);f.length;)f.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,r=0;r<a.length;r++){for(var t=a[r],o=!0,i=1;i<t.length;i++){var c=t[i];0!==n[c]&&(o=!1)}o&&(a.splice(r--,1),e=s(s.s=t[0]))}return e}var o={},n={8:0},a=[];function s(r){if(o[r])return o[r].exports;var t=o[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=o,s.d=function(e,r,t){s.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,r){if(1&r&&(e=s(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)s.d(t,o,function(r){return e[r]}.bind(null,o));return t},s.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(r,"a",r),r},s.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=r,i=i.slice();for(var u=0;u<i.length;u++)r(i[u]);var l=c;a.push([371,0]),t()}({2:function(e,r,t){"use strict";var o=t(1);r.a={apiUrl:"//damp-shore-91853.herokuapp.com",pg_urlParaObj:function(){location;var e=location.search,r={};""!==e&&e.split("?")[1].split("&").forEach((function(e){r[e.split("=")[0]]=e.split("=")[1]}));return r},noTokenKickPatch:"index.html",getCookieToken:function(){this.cookieToken=document.cookie.replace(/(?:(?:^|.*;\s*)token\s*\=\s*([^;]*).*$)|^.*$/,"$1")},checkLogIn:function(){var e=this.cookieToken,r=location.pathname.split("/"),t=r[r.length-1]=="".concat("index.html"),n="index.html"==r[r.length-1],a="register.html"==r[r.length-1];t||n||a||""==e&&(o.Notify.warning("Token 過期或登出，五秒後導回登入頁，請重新登入！"),setTimeout((function(){document.location.href="index.html"}),5e3))},signout:function(){document.cookie="token=; expires=; path=/",this.cookieToken="",o.Notify.success("完成登出"),this.checkLogIn()},getProfile:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="".concat(this.apiUrl,"/user/profile?queryUser=").concat(r);return new Promise((function(r,n){axios.defaults.headers.common.Authorization="Bearer ".concat(e.cookieToken),axios.get(t).then((function(e){r(e.data)})).catch((function(e){n(e),console.log("err.request",e.request);var r=JSON.parse(e.request.response);console.log("profileApi err.request.response",r),o.Notify.failure("讀取個人資料發生錯誤，".concat(e.response.data.message,"，將在五秒後導向登入頁面！")),setTimeout((function(){document.location.href="index.html"}),5e3)}))}))}}},371:function(e,r,t){"use strict";t.r(r);var o=t(3),n=t(5),a=t(1),s=t(2),i=t(4),c=t(59);function u(e,r,t,o,n,a,s){try{var i=e[a](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(o,n)}function l(e){return function(){var r=this,t=arguments;return new Promise((function(o,n){var a=e.apply(r,t);function s(e){u(a,o,n,s,i,"next",e)}function i(e){u(a,o,n,s,i,"throw",e)}s(void 0)}))}}Object(i.b)(o.Loading),Object(i.d)(n.Report),Object(i.c)(a.Notify);var p,f;new Vue({el:"#app",data:{apiUrl:s.a.apiUrl,isLoading:!1,cookieToken:"",userData:{userName:"Member"},personalUser:{userData:{userName:"Member",followers:[]},isFollow:Boolean,isLoad:!1},urlParaObj:{},posts:{data:[],isLoad:Boolean},errorMessage:{updatePassword:""}},methods:{pg_urlParaObj:s.a.pg_urlParaObj,getCookieToken:s.a.getCookieToken,checkLogIn:s.a.checkLogIn,signout:s.a.signout,getProfile:s.a.getProfile,clickFollow:(f=l(regeneratorRuntime.mark((function e(){var r,t,o,s,i,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.personalUser.isLoad=!0,r=this.personalUser.userData._id,t="".concat(this.apiUrl,"/user/").concat(r,"/follow"),axios.defaults.headers.common.Authorization="Bearer ".concat(this.cookieToken),o=this.personalUser.isFollow?"delete":"post",e.next=8,axios[o](t);case 8:return s=e.sent,i=s.data.data,a.Notify.success(i.message),e.next=13,this.getPersonalPosts({userID:r});case 13:(u=e.sent)||(l={title:"發生錯誤",message:"無法將更新追蹤使用者資訊，請重新載入頁面。"},n.Report.failure(l.title,'<p class="mb-0 text-center">'.concat(l.message,"</p>"),"確定"),Object(c.a)({msgStr:l.message})),this.personalUser.userData=u.data[0].userData,this.personalUser.isLoad=!1,this.personalUser.isFollow=!this.personalUser.isFollow,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),n.Report.failure("發生錯誤",'<p class="mb-0 text-center">'.concat(e.t0.response.data.message,"</p>"),"確定");case 23:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(){return f.apply(this,arguments)}),sendPersonalPostsSearch:(p=l(regeneratorRuntime.mark((function e(r){var t,o,a,s,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=null===(t=this.urlParaObj)||void 0===t?void 0:t.user_id,a=o||this.userData._id,s=r.timeSortStr,i=r.queryStr,this.posts.isLoad=!0,e.next=7,this.getPersonalPosts({userID:a,timeSortStr:s,queryStr:i});case 7:c=e.sent,this.posts.data=c.data,this.posts.isLoad=!1,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n.Report.failure("發生錯誤",'<p class="mb-0 text-center">'.concat(e.t0.response.data.message,"</p>"),"確定");case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e){return p.apply(this,arguments)}),getPersonalPosts:function(e){var r=this,t=e.userID,o=e.timeSortStr,n=void 0===o?"":o,a=e.queryStr,s=void 0===a?"":a,i=e.postID,c=void 0===i?"":i,u="".concat(this.apiUrl,"/posts/user/").concat(t,"?timeSort=").concat(n,"&q=").concat(s,"&post_id=").concat(c);return new Promise((function(e,t){axios.defaults.headers.common.Authorization="Bearer ".concat(r.cookieToken),axios.get(u).then((function(r){e(r.data)})).catch((function(e){t(e)}))}))}},created:function(){var e=this;o.Loading.custom("讀取中 ..."),this.getCookieToken(),this.checkLogIn(),this.getProfile().then(function(){var r=l(regeneratorRuntime.mark((function r(t){var a,s,i,c,u,p,f,d,h,g,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=t.data,c=i._id,u=i.avatarUrl,p=i.email,f=i.gender,d=i.userName,h={_id:c,avatarUrl:u,email:p,gender:f,userName:d},e.userData=h,e.urlParaObj=e.pg_urlParaObj(),g=null!==(a=e.urlParaObj)&&void 0!==a&&a.user_id?e.urlParaObj.user_id:"",v=g||e.userData._id,r.next=8,e.getPersonalPosts({userID:v,postID:(null===(s=e.urlParaObj)||void 0===s?void 0:s.post_id)||""}).then(function(){var r=l(regeneratorRuntime.mark((function r(t){var n,a,s,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.posts.data=t.data,0!=e.posts.data.length){r.next=8;break}return r.next=4,e.getProfile(v);case 4:n=r.sent,e.personalUser.userData=n.data,r.next=9;break;case 8:e.personalUser.userData=(null===(a=e.posts.data[0])||void 0===a?void 0:a.userData)||e.userData;case 9:e.personalUser.userData.followers?(s=e.personalUser.userData.followers,i=s.findIndex((function(e){return e.userData==h._id})),e.personalUser.isFollow=!i):(e.personalUser.userData.followers=[],e.personalUser.isFollow=!1),e.posts.isLoad=!1,o.Loading.remove();case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){o.Loading.remove(),n.Report.failure("產生錯誤",'<p class="mb-0 text-center mt-n2">原因：'.concat(e.response.data.message,"</p>"),"確定")}));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}})},4:function(e,r,t){"use strict";t.d(r,"b",(function(){return n})),t.d(r,"a",(function(){return a})),t.d(r,"d",(function(){return s})),t.d(r,"c",(function(){return i}));var o={primary:{hex:"#03438D",overlay:"rgba(3, 67, 141, 0.9)"},success:{hex:"#83C51D",overlay:"rgba(131,197,29,0.2)"},failure:{hex:"#F57375",overlay:"rgba(245,115,117,0.2)"},warning:{hex:"#EEC32A",overlay:"rgba(238, 195, 42,0.2)"}},n=function(e){return e.init({svgSize:"150px",backgroundColor:o.primary.overlay,messageFontSize:"14px",customSvgUrl:"assets/static-images/MetaWall_logo.png"})},a=function(e){return e.init({titleColor:o.primary.hex,okButtonBackground:o.primary.hex,borderRadius:"8px",plainText:!1})},s=function(e){return e.init({borderRadius:"8px",svgSize:"40px",plainText:!1,success:{buttonBackground:o.success.hex,buttonColor:"#000",backOverlayColor:o.success.overlayColor},failure:{buttonBackground:o.failure.hex,buttonColor:"#fff",backOverlayColor:o.failure.overlayColor},warning:{buttonBackground:o.warning.hex,buttonColor:"#fff",backOverlayColor:o.warning.overlayColor}})},i=function(e){return e.init({borderRadius:"8px",timeout:4e3,messageMaxLength:110,backOverlay:!1,backOverlayColor:o.primary.overlay,plainText:!0,clickToClose:!1,pauseOnHover:!0,zindex:4001,fontSize:"15px",success:{notiflixIconColor:"rgba(0, 0, 0, .7)",background:o.success.hex,textColor:"#000",backOverlayColor:o.success.overlayColor},failure:{notiflixIconColor:"rgba(255, 255, 255, .7)",background:o.failure.hex,textColor:"#fff",backOverlayColor:o.failure.overlayColor},warning:{notiflixIconColor:"rgba(0, 0, 0, .7)",background:o.warning.hex,textColor:"#000",backOverlayColor:o.warning.overlayColor}})}},59:function(e,r,t){"use strict";t.d(r,"a",(function(){return o}));var o=function(e){var r=e.msgStr,t=void 0===r?"":r,o=e.isThrow,n=void 0===o||o,a=new Error("發生錯誤：");if(a.message+="".concat(t),n)throw a}}});